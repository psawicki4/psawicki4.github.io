import{a as d,b as p,e as u,f,g,h as v,i as E,j as b}from"./chunk-62UXXMLL.js";import{Fc as m,Mb as r,Nb as a,bc as h,cc as l,hc as o,ib as c}from"./chunk-MLKVM6MF.js";var y=["canvas"],S=(()=>{let i=class i{constructor(){this.canvas=m("canvas"),this.scene=new p,this.camera=new d(50,1,.1,1e3),this.threeRenderer=new g({antialias:!0,alpha:!0}),this.controls=new v(this.camera,this.threeRenderer.domElement),this.clock=new u,this.loader=new b}ngAfterViewInit(){this.initThree(this.canvas()?.nativeElement)}ngOnDestroy(){this.threeRenderer.dispose(),this.mixer?.stopAllAction()}initThree(e){e.appendChild(this.threeRenderer.domElement);let t=e.clientWidth,n=e.clientHeight;this.updateSize(t,n),this.camera.position.set(1,1,4),this.camera.lookAt(0,0,0),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.minDistance=1.5,this.controls.maxDistance=10,setTimeout(()=>{this.loadModel()},0),this.threeRenderer.setAnimationLoop(()=>this.animate())}loadModel(){this.loader.setMeshoptDecoder(E),this.loader.load("assets/models/stylized_rock.glb",e=>{this.model=e.scene,this.model.scale.setScalar(.3),this.model.position.y=-1.3,this.scene.add(this.model),e.animations?.length&&(this.mixer=new f(this.model),this.mixer.clipAction(e.animations[0]).play()),this.threeRenderer.render(this.scene,this.camera)})}updateSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.threeRenderer.setSize(e,t)}animate(){let e=this.clock.getDelta();this.mixer?.getRoot()&&this.mixer.update(e),this.model&&(this.model.rotation.y+=.005),this.controls.enabled&&this.controls.update(),this.threeRenderer.render(this.scene,this.camera)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c({type:i,selectors:[["psa-home-three"]],viewQuery:function(t,n){t&1&&h(n.canvas,y,5),t&2&&l()},decls:8,vars:0,consts:[["canvas",""],[1,"relative","h-full","grab"],[1,"absolute","bottom-0","w-full","text-center","text-xs","italic"],["href","https://skfb.ly/ovEzD",1,"link"],["href","http://creativecommons.org/licenses/by-nc/4.0/",1,"link"]],template:function(t,n){t&1&&(r(0,"div",1,0)(2,"p",2)(3,"a",3),o(4,'"Stylized rock"'),a(),o(5," by Coffeek is licensed under "),r(6,"a",4),o(7,"Creative Commons Attribution-NonCommercial."),a()()())},styles:[".link[_ngcontent-%COMP%]{text-decoration:underline}.grab[_ngcontent-%COMP%]{cursor:grab}.grab[_ngcontent-%COMP%]:active{cursor:grabbing}"],changeDetection:0});let s=i;return s})();export{S as HomeThreeComponent};
