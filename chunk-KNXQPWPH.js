import{a as J,e as K,f as W}from"./chunk-GN4DPVHV.js";import{a as q}from"./chunk-K5RFIN34.js";import{M as z,aa as j,ba as G}from"./chunk-B7OXQK5T.js";import{h as A,i as U}from"./chunk-CPLT7J3U.js";import{$b as k,B as b,Ca as C,Da as y,Gb as l,Hb as c,Lb as O,Mb as L,P as I,Pb as _,Rb as m,Y as R,Zb as P,_a as s,_b as H,bb as F,bc as v,cc as B,dc as E,fa as M,ic as g,ka as f,kc as Q,lc as N,ma as S,mc as $,nb as x,ob as V,pb as D,s as T,ua as p,va as d,vb as h,xb as a}from"./chunk-H6AV5CDL.js";var u=(()=>{let i=class i{constructor(){this.templateRef=M(F)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=S({type:i,selectors:[["","listItemTemplate",""]],standalone:!0});let o=i;return o})();var tt=["viewport"],et=o=>({$implicit:o});function it(o,i){if(o&1){let r=L();l(0,"li",4),_("click",function(){let t=p(r).$implicit,n=m();return d(n.selectItem(t))})("keyup.enter",function(){let t=p(r).$implicit,n=m();return d(n.selectItem(t))})("keydown.arrowDown",function(){let t=p(r).index,n=m();return d(n.changeFocus(t+1))})("keydown.arrowUp",function(){let t=p(r).index,n=m();return d(n.changeFocus(t-1))}),O(1,5),c()}if(o&2){let r=i.$implicit,e=i.index,t=m();a("id",e)("ngClass",t.selectedItem===r?"card__selected":"card")("tabindex",t.focusableIndex===e?0:-1),s(),a("ngTemplateOutlet",t.listItemTemplateRef().templateRef)("ngTemplateOutletContext",Q(5,et,r))}}var Y=(()=>{let i=class i{constructor(){this.focusableIndex=0,this.data=y([]),this.itemHeight=y(0),this.fetchMore=C(),this.selected=C(),this.listItemTemplateRef=D(u),this.viewport=V.required("viewport")}ngAfterViewInit(){this.subscription=this.viewport().elementScrolled().pipe(T(()=>this.viewport().measureScrollOffset("bottom")),I(),b(([e,t])=>t<e&&t<this.itemHeight()*2),R(200)).subscribe(()=>{this.fetchMore.emit()})}selectItem(e){this.selectedItem=e,this.selected.emit(e)}changeFocus(e){let t=document.getElementById(e.toString());t&&(t.focus(),this.focusableIndex=e)}trackBy(e){return e}ngOnDestroy(){this.subscription?.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["psa-list"]],contentQueries:function(t,n,w){t&1&&P(w,n.listItemTemplateRef,u,5),t&2&&k()},viewQuery:function(t,n){t&1&&H(n.viewport,tt,5),t&2&&k()},inputs:{data:[1,"data"],itemHeight:[1,"itemHeight"]},outputs:{fetchMore:"fetchMore",selected:"selected"},standalone:!0,features:[g],decls:4,vars:3,consts:[["viewport",""],[1,"list",3,"itemSize"],["role","listbox"],["role","option","matRipple","",3,"id","ngClass","tabindex","click","keyup.enter","keydown.arrowDown","keydown.arrowUp",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["role","option","matRipple","",3,"click","keyup.enter","keydown.arrowDown","keydown.arrowUp","id","ngClass","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&(l(0,"cdk-virtual-scroll-viewport",1,0)(2,"ul",2),h(3,it,2,7,"li",3),c()()),t&2&&(a("itemSize",n.itemHeight()),s(3),a("cdkVirtualForOf",n.data())("cdkVirtualForTrackBy",n.trackBy))},dependencies:[K,J,W,A,U,z],styles:[".list[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;gap:8px;scrollbar-width:thin}.card[_ngcontent-%COMP%], .card__selected[_ngcontent-%COMP%]{padding:32px;border-radius:4px;border-right:solid 1px rgba(255,255,255,.12);background-color:#282828;margin:8px;cursor:pointer}.card__selected[_ngcontent-%COMP%]{background-color:#343434}"],changeDetection:0});let o=i;return o})();function ot(o,i){if(o&1&&(l(0,"p"),v(1),c()),o&2){let r=i.$implicit;s(),E("Pok\xF3j numer ",r.roomNumber,"")}}var It=(()=>{let i=class i{constructor(){this.rooms=x({total:0,data:[]}),this.selectedRoom=x({roomNumber:0}),this.skip=0,this.allRooms=Array.from({length:1e3},(e,t)=>({roomNumber:t}))}ngOnInit(){this.getFirstRooms()}getFirstRooms(){this.skip=0;let e=this.allRooms.slice(this.skip,this.skip+50);this.rooms.set({total:1e3,data:e})}fetchMoreRooms(){if(this.rooms().data.length===this.rooms().total)return;this.skip+=50;let e=this.allRooms.slice(this.skip,this.skip+50),t={total:1e3,data:[...this.rooms().data,...e]};this.rooms.set(t)}selectRoom(e){e&&this.selectedRoom.set(e)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["psa-list-page"]],standalone:!0,features:[g],decls:7,vars:5,consts:[[1,"text-2xl","mb-8"],[1,"psa-list"],[3,"fetchMore","selected","data","itemHeight"],["listItemTemplate",""]],template:function(t,n){t&1&&(l(0,"psa-card")(1,"h1",0),v(2),N(3,"translate"),c(),l(4,"div",1)(5,"psa-list",2),_("fetchMore",function(){return n.fetchMoreRooms()})("selected",function(Z){return n.selectRoom(Z)}),h(6,ot,2,1,"ng-template",3),c()()()),t&2&&(s(2),B($(3,3,"LIST.header")),s(3),a("data",n.rooms().data)("itemHeight",88))},dependencies:[q,Y,u,G,j],styles:[".psa-list[_ngcontent-%COMP%]{height:600px;width:300px}"],changeDetection:0});let o=i;return o})();export{It as ListPageComponent};
