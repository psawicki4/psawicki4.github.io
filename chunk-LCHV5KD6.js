import{a as o,b as u,ba as w,ga as j,ra as b,ua as d,va as R,xc as y,yc as g}from"./chunk-F25UZUAJ.js";var k=Symbol("DEEP_SIGNAL");function D(t){return new Proxy(t,{has(e,n){return!!this.get(e,n,void 0)},get(e,n){let s=y(e);return!O(s)||!(n in s)?(d(e[n])&&e[n][k]&&delete e[n],e[n]):(d(e[n])||(Object.defineProperty(e,n,{value:g(()=>e()[n]),configurable:!0}),e[n][k]=!0),D(e[n]))}})}var x=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function O(t){if(t===null||typeof t!="object"||P(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(x.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function P(t){return typeof t?.[Symbol.iterator]=="function"}var T=new WeakMap,c=Symbol("STATE_SOURCE");function z(t,...e){let n=y(()=>I(t)),s=e.reduce((i,a)=>o(o({},i),typeof a=="function"?a(i):a),n),f=t[c],r=Reflect.ownKeys(t[c]);for(let i of Reflect.ownKeys(s))if(r.includes(i)){let a=i;n[a]!==s[a]&&f[a].set(s[a])}C(t)}function I(t){let e=t[c];return Reflect.ownKeys(t[c]).reduce((n,s)=>{let f=e[s]();return u(o({},n),{[s]:f})},{})}function W(t){return T.get(t[c])||[]}function C(t){let e=W(t);for(let n of e){let s=y(()=>I(t));n(s)}}function B(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),s=e;return(()=>{class r{constructor(){let a=s.reduce((l,E)=>E(l),A()),{stateSignals:p,props:K,methods:M,hooks:v}=a,h=o(o(o({},p),K),M);this[c]=a[c];for(let l of Reflect.ownKeys(h))this[l]=h[l];let{onInit:S,onDestroy:m}=v;S&&S(),m&&j(b).onDestroy(m)}static \u0275fac=function(p){return new(p||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function A(){return{[c]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function F(t){return e=>{let n=t(o(o(o({[c]:e[c]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),u(o({},e),{props:o(o({},e.props),n)})}}function V(t){return F(e=>{let n=t(e);return Reflect.ownKeys(n).reduce((f,r)=>{let i=n[r];return u(o({},f),{[r]:d(i)?i:g(i)})},{})})}function $(t){return e=>{let n=t(o(o(o({[c]:e[c]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),u(o({},e),{methods:o(o({},e.methods),n)})}}function J(t){return e=>{let n=typeof t=="function"?t():t,s=Reflect.ownKeys(n);let f=e[c],r={};for(let i of s)f[i]=R(n[i]),r[i]=D(f[i]);return u(o({},e),{stateSignals:o(o({},e.stateSignals),r)})}}export{z as a,B as b,V as c,$ as d,J as e};
