import{Da as j,Fc as l,Gc as g,a as e,b as a,ba as p,ha as b,nb as k,ob as v}from"./chunk-L6QZW2PC.js";function w(t){let n=g(()=>t());return R(n)?new Proxy(t,{get(o,i){return i in n?(k(o[i])||Object.defineProperty(o,i,{value:l(()=>o()[i]),configurable:!0}),w(o[i])):o[i]}}):t}function R(t){return t?.constructor===Object}var C=new WeakMap,c=Symbol("STATE_SOURCE");function q(t,...n){t[c].update(o=>n.reduce((i,r)=>e(e({},i),typeof r=="function"?r(i):r),o)),A(t)}function E(t){return t[c]()}function W(t){return C.get(t[c])||[]}function A(t){let n=W(t);for(let o of n){let i=g(()=>E(t));o(i)}}function _(...t){let n=[...t],o=typeof n[0]=="function"?{}:n.shift(),i=n;return(()=>{class s{constructor(){let u=i.reduce((f,T)=>T(f),H()),{stateSignals:d,computedSignals:I,methods:D,hooks:M}=u,m=e(e(e({},d),I),D);this[c]=u[c];for(let f in m)this[f]=m[f];let{onInit:h,onDestroy:y}=M;h&&h(),y&&b(j).onDestroy(y)}static \u0275fac=function(d){return new(d||s)};static \u0275prov=p({token:s,factory:s.\u0275fac,providedIn:o.providedIn||null})}return s})()}function H(){return{[c]:v({}),stateSignals:{},computedSignals:{},methods:{},hooks:{}}}function z(t){return n=>{let o=t(e(e({},n.stateSignals),n.computedSignals));return Object.keys(o),a(e({},n),{computedSignals:e(e({},n.computedSignals),o)})}}function B(t){return n=>{let o=t(e(e(e({[c]:n[c]},n.stateSignals),n.computedSignals),n.methods));return Object.keys(o),a(e({},n),{methods:e(e({},n.methods),o)})}}function G(t){return n=>{let o=typeof t=="function"?t():t,i=Object.keys(o);n[c].update(s=>e(e({},s),o));let r=i.reduce((s,S)=>{let u=l(()=>n[c]()[S]);return a(e({},s),{[S]:w(u)})},{});return a(e({},n),{stateSignals:e(e({},n.stateSignals),r)})}}export{q as a,_ as b,z as c,B as d,G as e};
